// packages/server/src/game/LobbyManager.ts
import { RoomManager } from './RoomManager';
import { RoomInfo } from '@cumor/shared';
import { v4 as uuidv4 } from 'uuid'; // ID Ã¼retmek iÃ§in (npm install uuid lazÄ±m olabilir, yoksa Math.random kullan)

export class LobbyManager {
  private rooms: Map<string, RoomManager> = new Map();

  createRoom(name: string, password?: string): RoomManager {
    const id = Math.random().toString(36).substring(7); // Basit ID (Ã¶rn: "x7z9a")
    const newRoom = new RoomManager(id, name, password);
    this.rooms.set(id, newRoom);
    console.log(`ğŸ  Yeni Oda Kuruldu: ${name} (${id})`);
    return newRoom;
  }

  getRoom(id: string): RoomManager | undefined {
    return this.rooms.get(id);
  }

  // TÃ¼m odalarÄ±n listesini ver
  getRoomList(): RoomInfo[] {
    return Array.from(this.rooms.values()).map(room => room.getRoomInfo());
  }

  removeRoom(id: string) {
    this.rooms.delete(id);
    console.log(`ğŸ—‘ï¸ Oda Silindi: ${id}`);
  }
}